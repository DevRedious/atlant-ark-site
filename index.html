<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Atlant-Ark - Serveur ARK</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Header -->
  <header>
    <h1>ğŸŒ‹ Atlant-Ark</h1>
    <nav>
      <a href="#stats">Statistiques</a>
      <a href="#mods">Mods & Maps</a>
      <a href="#discord">Discord</a>
      <a href="#don">Soutenir</a>
    </nav>
  </header>

  <!-- PrÃ©sentation -->
  <section id="presentation">
    <h2>Notre serveur</h2>
    <p>Serveur communautaire ARK, stabilitÃ© garantie, ouvert Ã  tous.</p>
  </section>

  <!-- Statistiques dynamiques -->
  <section id="stats">
    <h2>ğŸ“Š Statistiques</h2>
    <div id="stats-loader" class="loader"></div>
    <p id="player-count" style="display:none;"></p>
    <p id="uptime" style="display:none;"></p>
    <p id="auctions" style="display:none;"></p>
  </section>

  <!-- Mods -->
  <section id="mods">
    <h2>ğŸ”§ Mods installÃ©s</h2>
    <div id="mods-loader" class="loader"></div>
    <ul id="mods-list" style="display:none;"></ul>
  </section>

  <!-- Discord -->
  <section id="discord">
    <h2>ğŸ’¬ Rejoignez la communautÃ©</h2>
    <a href="https://discord.gg/8GBpJqb84A" target="_blank" class="btn">Rejoindre le Discord</a>
  </section>

  <!-- Don -->
  <section id="don">
    <h2>ğŸ’¸ Soutenir le projet</h2>
    <a href="https://www.paypal.me/RoxaneRubis" target="_blank" class="paypal-btn">
      <img src="https://www.paypalobjects.com/webstatic/mktg/Logo/pp-logo-100px.png" alt="PayPal" />
      <span>Faire un don</span>
    </a>
  </section>

  <script>
    const API_URL = "https://atlant-ark-token.up.railway.app"; // ğŸ‘‰ ton API Railway

    async function loadStats() {
      try {
        const res = await fetch(`${API_URL}/stats`);
        const data = await res.json();

        // Masquer loader et afficher donnÃ©es
        document.getElementById("stats-loader").style.display = "none";
        document.getElementById("player-count").style.display = "block";
        document.getElementById("uptime").style.display = "block";
        document.getElementById("auctions").style.display = "block";

        document.getElementById("player-count").innerText = "Joueurs en ligne : " + data.players_online;
        document.getElementById("uptime").innerText = "Uptime : " + data.uptime;
        document.getElementById("auctions").innerText = "EnchÃ¨res actives : " + data.active_auctions;
      } catch (err) {
        console.error("Erreur stats:", err);
      }
    }

    async function loadMods() {
      try {
        const res = await fetch(`${API_URL}/mods`);
        const mods = await res.json();

        // Masquer loader et afficher la liste
        document.getElementById("mods-loader").style.display = "none";
        const list = document.getElementById("mods-list");
        list.style.display = "block";

        list.innerHTML = "";
        mods.forEach(m => {
          const li = document.createElement("li");
          li.textContent = m;
          list.appendChild(li);
        });
      } catch (err) {
        console.error("Erreur mods:", err);
      }
    }

    loadStats();
    loadMods();
  </script>
</body>
</html>
